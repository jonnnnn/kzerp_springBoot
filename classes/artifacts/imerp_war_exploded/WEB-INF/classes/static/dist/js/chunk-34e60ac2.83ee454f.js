(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34e60ac2"],{"9d30":function(e,t,r){var a=r("e46b");a(a.S,"Number",{isNaN:function(e){return e!=e}})},d597:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"abow_dialog",attrs:{title:e.isNew?"退货单新增":"退货单修改","close-on-click-modal":!1,visible:e.visible,width:"80%"},on:{"update:visible":function(t){e.visible=t}}},[r("div",[r("el-form",{ref:"dataForm",attrs:{model:e.dataForm,labelSuffix:"：",size:"mini",rules:e.dataRule,"label-width":"120px"}},[r("el-input",{staticStyle:{display:"none"},model:{value:e.dataForm.orderType,callback:function(t){e.$set(e.dataForm,"orderType",t)},expression:"dataForm.orderType"}}),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"客户",prop:"customerId"}},[r("im-selector",{attrs:{mapModel:e.dataForm,mapKeyVal:"customerName:customerId",dataType:"biz.customer",placeholder:"请选择客户"},on:{"update:mapModel":function(t){e.dataForm=t},"update:map-model":function(t){e.dataForm=t},change:e.changeCust},model:{value:e.dataForm.customerId,callback:function(t){e.$set(e.dataForm,"customerId",t)},expression:"dataForm.customerId"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"退货日期",prop:"orderDate"}},[r("el-date-picker",{attrs:{placeholder:"退货日期","value-format":"yyyy-MM-dd"},model:{value:e.dataForm.orderDate,callback:function(t){e.$set(e.dataForm,"orderDate",t)},expression:"dataForm.orderDate"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"仓库",prop:"autoPeaking"}},[r("el-checkbox",{model:{value:e.dataForm.autoPeaking,callback:function(t){e.$set(e.dataForm,"autoPeaking",t)},expression:"dataForm.autoPeaking"}},[e._v("是否自动入库")])],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:16}},[r("el-form-item",{attrs:{label:"备注",prop:"remark"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"备注"},model:{value:e.dataForm.remark,callback:function(t){e.$set(e.dataForm,"remark",t)},expression:"dataForm.remark"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"退货金额",prop:"orderAmount"}},[r("el-input",{attrs:{disabled:"",placeholder:"退货金额",clearable:""},model:{value:e.dataForm.orderAmount,callback:function(t){e.$set(e.dataForm,"orderAmount",t)},expression:"dataForm.orderAmount"}})],1)],1)],1)],1)],1),r("vxe-grid",{ref:"sGrid",staticClass:"vxe-table-element",attrs:{border:"",resizable:"",size:"mini","highlight-current-row":"","remote-filter":"",toolbar:e.toolbar,"proxy-config":e.tableProxy,"edit-rules":e.validRules,columns:e.itableColumn,"select-config":{reserve:!0},"mouse-config":{selected:!0},"keyboard-config":{isArrow:!0,isDel:!0,isTab:!0,isEdit:!0},"edit-config":{trigger:"dblclick",mode:"cell"},"footer-cell-class-name":e.footerCellClassName,"footer-method":e.footerMethod,"show-footer":""},scopedSlots:e._u([{key:"buttons",fn:function(){return[r("el-button",{attrs:{size:"mini",icon:"el-icon-circle-plus"},on:{click:function(t){return e.$refs.sGrid.insert({})}}},[e._v("新增")]),r("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.removeSelecteds(e.$refs.sGrid)}}},[e._v("删除")])]},proxy:!0}])}),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取消")]),r("el-button",{attrs:{type:"primary",disabled:e.btnDisable},on:{click:e.dataFormSubmit}},[e._v("确定")])],1)],1)},o=[],i=(r("cc57"),r("163d"),r("9d30"),r("e1a58")),l=r("be17"),s=r.n(l),d={mixins:[i["a"]],data:function(){return{mixinViewModuleOptions:{getDataListURL:"/so/salesorderline/list",getDataListIsPage:!1,updateURL:"/so/salesorder/update",deleteIsBatch:!0,prodURL:"/base/product/search"},visible:!1,btnDisable:!1,dataForm:{id:void 0,orderNum:"",orderType:"RETURN",customerId:"",orderDate:new Date,planDeliveryDate:new Date,orderAmount:"0",shipType:"0",remark:"",autoPeaking:!0,deletedFlag:"N"},dataRule:{customerId:[{required:!0,message:"客户不能为空",trigger:"blur"}],orderDate:[{required:!0,message:"退货日期不能为空",trigger:"blur"}]},tableProxy:{autoLoad:!1},validRules:{productName:[{required:!0,message:"物料必填"}],productCode:[{required:!0,message:"物料必填"}],orderQty:[{required:!0,message:"退货数量必填"},{type:"number",message:"请输入数字"}],price:[{required:!0,message:"退货价格必填"},{type:"number",message:"请输入数字"}]},itableColumn:[{type:"selection",width:50,align:"center"},{type:"index",width:50,align:"center"},{title:"物料名称",field:"productName",width:"150px",align:"center",editRender:{name:"ElAutocomplete",props:{fetchSuggestions:this.prodSeach,triggerOnFocus:!1,popperClass:"prod-popper"},events:{select:this.handleProcSelect},autoselect:!0},footerRender:function(e,t){return"汇总"}},{title:"物料编码",field:"productCode",width:"110px",align:"left"},{title:"指导售价",field:"bPrice",width:"60px",align:"left"},{title:"退货数量",field:"orderQty",align:"left",width:"40px",editRender:{name:"input",autoselect:!0},editPost:function(e,t){var r=t.orderQty;if(!Number.isNaN(r))return-Math.abs(Number(r))}},{title:"退货价",field:"price",sortable:!0,align:"center",width:"50px",editRender:{name:"input",autoselect:!0}},{title:"退货总金额",field:"amount",align:"left",width:"90px",formatter:["toFixedString",2],editPost:function(e,t){var r=t.orderQty,a=t.price;if(!Number.isNaN(r)&&!Number.isNaN(a))return Number(r)*Number(a).toFixed(2)},footerRender:function(e,t){return s.a.sum(t,e.property)}},{title:"单位",field:"unit",width:"40px"},{title:"条码",field:"barCode",width:"110px",align:"left"},{title:"品牌",field:"brand",width:"80px",align:"left"},{title:"车型",field:"vehicle",width:"80px",align:"left"},{title:"产地",field:"madein",width:"80px",align:"left"},{title:"规格属性",field:"specialParam",width:"250px",align:"left"},{title:"描述",field:"description",width:"250px",align:"left"}],toolbar:{id:"full_edit_1",resizable:{storage:!0},setting:{storage:!0}}}},methods:{prodSeach:function(e,t){var r=this;e&&this.$axios.post(this.mixinViewModuleOptions.prodURL,{name:e,customerId:this.dataForm.customerId,lastPrice:1}).then((function(e){for(var a=0;a<e.length;a++)e[a].value=e[a].val;clearTimeout(r.timeout),r.timeout=setTimeout((function(){t(e)}),100*Math.random())}))},handleProcSelect:function(e,t){var r=e.row;t&&(Object.assign(r,t),r.productId=t.id,r.productName=t.name,r.stock=t.stock,r.bPrice=t.salePrice,r.productCode=t.code,r.price=t.salePrice,this.$refs.sGrid.updateFooter())},changeCust:function(e){}},mounted:function(){}},n=d,c=r("623f"),u=function(e){e.options.__source="src/views/so/salesreturn-add-or-update.vue"},m=u,p=Object(c["a"])(n,a,o,!1,null,null,null);"function"===typeof m&&m(p);t["default"]=p.exports}}]);