(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08550362","chunk-2d210fe0"],{a650:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("d2-container",[a("el-collapse",{attrs:{slot:"header"},slot:"header"},[a("el-collapse-item",[a("template",{slot:"title"},[e._v("\n        查询条件"),a("i",{staticClass:"el-icon-d-arrow-right"})]),a("dynamic-form",{ref:"dataForm",attrs:{formprops:e.formprops,"col-span":"6,6,7,5",alldescriptors:e.descriptors},model:{value:e.dataForm,callback:function(t){e.dataForm=t},expression:"dataForm"}},[a("template",{slot:"btnsearch"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询")]),a("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.reset}},[e._v("重置")])],1)],2)],2)],1),a("vxe-grid",{ref:"pGrid",attrs:{border:"",resizable:"","highlight-current-row":"","remote-filter":"",size:"mini","row-id":"id",toolbar:e.toolbar,"proxy-config":e.tableProxy,columns:e.tableColumn,"select-config":{reserve:!0},"edit-config":{trigger:"click",mode:"row",showStatus:!0}},on:{"cell-dblclick":this.gathering},scopedSlots:e._u([{key:"buttons",fn:function(){return[e.$hasPermission("fin:payrec:save")?a("el-button",{ref:"btnStatusEdit",attrs:{enablestatus:"NEW","row-dbclick":"","form-readonly":"",type:"success",size:"mini",icon:"el-icon-edit"},on:{click:function(t){return e.gathering([],null)}}},[e._v("收/付款")]):e._e(),e.$hasPermission("fin:payrec:print")?a("el-button",{attrs:{type:"info",size:"mini",icon:"el-icon-printer"}},[e._v("打印")]):e._e(),e.$hasPermission("fin:payrec:export")?a("el-button",{attrs:{type:"info",size:"mini",icon:"fa fa-file-excel-o"},on:{click:function(t){return e.$refs.pGrid.exportCsv()}}},[e._v("  导出")]):e._e()]},proxy:!0}])}),a("el-pagination",{attrs:{slot:"footer","current-page":e.page,"page-sizes":[10,20,50,100],"page-size":e.limit,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":function(t){return e.pageSizeChangeHandle(t,"vxe")},"current-change":function(t){return e.pageCurrentChangeHandle(t,"vxe")}},slot:"footer"}),e.addOrUpdateVisible?a("add-or-update",{ref:"addOrUpdate",on:{refreshDataList:e.getDataList}}):e._e()],1)},l=[],n=a("b9f9"),i=a("e1a58"),o={name:"fin-payrec",mixins:[i["a"]],data:function(){return{mixinViewModuleOptions:{getDataListURL:"/fin/payrec/list",getDataListIsPage:!0,updateURL:"/fin/payrec/update",deleteURL:"/fin/payrec/delete",deleteIsBatch:!0,exportURL:"/fin/payrec/export"},dataForm:{id:null,type:null,typeName:null,sourceOrderType:null,sourceOrderId:null,sourceOrderNum:null,custName:null,amount:null,orderDate:null,pic:null,status:null,remark:null},descriptors:{type:{type:"enum",label:"类型",enum:["RECEIVABLE","PAYABLE"],options:[{label:"应收",value:"RECEIVABLE"},{label:"应付",value:"PAYABLE"}]},status:{type:"enum",label:"付款状态",enum:["PAID","UNPAID"],options:[{label:"已付款",value:"PAID"},{label:"未付款",value:"UNPAID"}]},bDate:{type:"date",label:"入库日期",colSpan:2,props:{type:"daterange",rangeSeparator:"至",startPlaceholder:"开始日期",endPlaceholder:"结束日期",valueFormat:"yyyy-MM-dd"}},separate1:this.$g.separate,sourceOrderType:{type:"cust",label:"业务类型",placeholder:"请选择业务类型",name:"im-selector",props:{mapKeyVal:"sourceOrderType",dataType:"code.SOURCE_ORDER_TYPE",clearable:!0}},sourceOrderNum:{type:"string",label:"来源订单号",props:{clearable:!0}},custName:{type:"cust",label:"往来单位",placeholder:"请输入单位名称",name:"im-selector",props:{mapKeyVal:"custName:custId",dataType:"biz.customervendor",clearable:!0}},btnSearch:{type:"slot",name:"btnsearch"}},tableColumn:[{type:"selection",width:50,align:"center"},{type:"index",width:50,align:"center"},{title:"应收/应付款",field:"type",sortable:!0,width:"100px",align:"center"},{title:"业务类型",field:"sourceOrderTypeMean",sortable:!0,width:"80px",align:"center"},{title:"来源订单号",field:"sourceOrderNum",sortable:!0,width:"120px",align:"center"},{title:"往来单位",field:"custName",sortable:!0,width:"180px",align:"center"},{title:"金额",field:"amount",sortable:!0,align:"center"},{title:"已付金额",field:"yamount",sortable:!0,align:"center"},{title:"待付金额",field:"pamount",sortable:!0,align:"center"},{title:"创建日期",field:"orderDate",sortable:!0,align:"center",formatter:["toDateString","yyyy-MM-dd"]},{title:"经办人",field:"pic",sortable:!0,align:"center"},{title:"付款状态",field:"statusMean",sortable:!0,align:"center"},{title:"备注",field:"remark",sortable:!0,align:"center"}],toolbar:{id:"full_edit_1",refresh:!0,resizable:{storage:!0},setting:{storage:!0}}}},components:{AddOrUpdate:n["default"]},methods:{handleFormReset:function(){this.$refs.dataForm.resetFields()},gathering:function(e,t){var a=this,r=e.row,l=new Array;if(null===r||"undefined"===typeof r){var n=this.$refs.pGrid;if(this.dataListSelections=n.getSelectRecords(),0===n.getSelectRecords().length){if(!n.getCurrentRow())return this.$message({message:"请选择要删除的记录",type:"warning"});l.push(n.getCurrentRow())}else l=l.concat(this.dataListSelections)}else l.push(r);for(var i="",o="",s=0,c=0;c<l.length;c++){var u=l[c];if(""==i)i=u.custName,o=u.custId;else if(i!=u.custName)return this.$message({message:"相同客户才能进行合并收款!",type:"warning"});if(0==u.pamount)return this.$message({message:"单据"+u.sourceOrderNum+"已经付款不能再次支付!",type:"warning"});s+=u.pamount}this.addOrUpdateVisible=!0,this.$nextTick((function(){var e={custName:i,amount:s,custId:o};a.$refs.addOrUpdate.init(l,e)}))}},mounted:function(){}},s=o,c=a("623f"),u=function(e){e.options.__source="src/views/fin/payrec.vue"},d=u,p=Object(c["a"])(s,r,l,!1,null,null,null);"function"===typeof d&&d(p);t["default"]=p.exports},b9f9:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{title:"应收应付单收款","close-on-click-modal":!1,visible:e.visible,width:"80%"},on:{"update:visible":function(t){e.visible=t}}},[a("div",[a("el-container",[a("el-aside",{attrs:{width:"650px"}},[a("vxe-grid",{ref:"sGrid",staticClass:"vxe-table-element",attrs:{border:"",resizable:"",size:"mini","highlight-current-row":"",data:e.tableData,columns:e.itableColumn,"select-config":{reserve:!0},"mouse-config":{selected:!0},"footer-cell-class-name":e.footerCellClassName,"footer-method":e.footerMethod,"show-footer":""}})],1),a("el-container",[a("el-main",{staticStyle:{padding:"0px"}},[a("dynamic-form",{ref:"dataForm",attrs:{formprops:e.formprops,"col-span":"*",alldescriptors:e.descriptors},model:{value:e.dataForm,callback:function(t){e.dataForm=t},expression:"dataForm"}},[a("template",{slot:"sourceOrder"},[a("label",[e._v(e._s(e.dataForm.sourceOrderNum))])])],2)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.visible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",disabled:e.btnDisable},on:{click:e.dataFormSubmit}},[e._v("确定")])],1)])},l=[],n=a("e1a58"),i=a("be17"),o=a.n(i),s={mixins:[n["a"]],data:function(){return{mixinViewModuleOptions:{updateURL:"/fin/realpayrec/save"},visible:!1,btnDisable:!1,dataForm:{custId:null,custName:null,amount:null,pic:null,gatheringTypeName:null,gatheringType:null,remark:null,payDate:new Date},descriptors:{custName:{type:"string",disabled:"disabled",label:"往来单位"},amount:{type:"number",disabled:"disabled",label:"收/付款金额"},gatheringTypeName:{type:"cust",label:"收/付款账号",name:"im-selector",props:{mapKeyVal:"gatheringTypeName:gatheringType",dataType:"biz.gatheringType",clearable:!0}},pic:{type:"cust",label:"经办人",name:"im-selector",props:{mapKeyVal:"pic",dataType:"biz.employee",clearable:!0}},payDate:{name:"el-date-picker",type:"cust",label:"收/付款日期",props:{valueFormat:"yyyy-MM-dd"}},remark:{type:"string",label:"备注"}},tableData:[],subTableAll:!0,itableColumn:[{type:"index",width:50,align:"center"},{title:"业务类型",field:"sourceOrderTypeMean",align:"center",footerRender:function(e,t){return"汇总"}},{title:"来源订单号",field:"sourceOrderNum",align:"center"},{title:"金额",field:"amount",align:"center",formatter:["toFixedString",2],footerRender:function(e,t){return o.a.sum(t,e.property)}},{title:"已收/付金额",field:"yamount",align:"center",formatter:["toFixedString",2],footerRender:function(e,t){return o.a.sum(t,e.property)}},{title:"本次收/付金额",field:"pamount",align:"center",formatter:["toFixedString",2],footerRender:function(e,t){return o.a.sum(t,e.property)}}],validRules:{pamount:[{required:!0,message:"本次收/付金额必填"},{type:"number",message:"请输入数字"}]}}},methods:{init:function(e,t){this.tableData=e,this.entityModel=Object.assign({},t),this.visible=!0}},created:function(){},mounted:function(){}},c=s,u=a("623f"),d=function(e){e.options.__source="src/views/fin/payrec-add-or-update.vue"},p=d,m=Object(u["a"])(c,r,l,!1,null,null,null);"function"===typeof p&&p(m);t["default"]=m.exports}}]);