(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1154086c","chunk-2d0b6965"],{"1e94":function(e){e.exports=JSON.parse('{"form":{"input":{"pname":"父级菜单","code":"编号","name":"名称","pinyinCode":"拼音码","wbCode":"五笔码","remark":"备注","companyId":"公司","parentId":"父级菜单"}}}')},b044:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{visible:e.visible,title:e.isNew?e.$t("views.public.add"):e.$t("views.public.update"),"close-on-click-modal":!1,"close-on-press-escape":!1,width:"388px"},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"dataForm",staticClass:"tb-matthew",attrs:{model:e.dataForm,rules:e.rules,"label-width":"120px",labelSuffix:"：",size:"mini"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{prop:"id"}}),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{prop:"pname"}}),a("el-form-item",{attrs:{prop:"parentId",label:e.data.form.input.parentId}},[a("im-selector",{attrs:{placeholder:"请选择父级物料名称",mapModel:e.dataForm,mapKeyVal:"pname:parentId",dataType:"biz.productcategoryall"},on:{"update:mapModel":function(t){e.dataForm=t},"update:map-model":function(t){e.dataForm=t}},model:{value:e.dataForm.parentId,callback:function(t){e.$set(e.dataForm,"parentId",t)},expression:"dataForm.parentId"}})],1),a("el-form-item",{attrs:{prop:"code",label:e.data.form.input.code}},[a("el-input",{attrs:{placeholder:e.data.form.input.code,disabled:e.dataForm.id},model:{value:e.dataForm.code,callback:function(t){e.$set(e.dataForm,"code",t)},expression:"dataForm.code"}})],1),a("el-form-item",{attrs:{prop:"name",label:e.data.form.input.name}},[a("el-input",{attrs:{placeholder:e.data.form.input.name},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),a("el-form-item",{attrs:{prop:"remark",label:e.data.form.input.remark}},[a("el-input",{attrs:{placeholder:e.data.form.input.remark},model:{value:e.dataForm.remark,callback:function(t){e.$set(e.dataForm,"remark",t)},expression:"dataForm.remark"}})],1)],1),a("template",{slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("views.public.cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dataFormSubmitHandle()}}},[e._v(e._s(e.$t("views.public.confirm")))])],1)],2)],1)},o=[],r=(a("cc57"),a("1e94")),n=a("e1a58"),s={mixins:[n["a"]],data:function(){var e=this,t=function(t,a,i){if(a){var o={};e.dataForm.id&&(o.id=e.dataForm.id),o.code=a,e.$axios({url:"/base/productcategory/checkCode",method:"post",data:o}).then((function(e){e>0?i(new Error("编码重复，请重新指定")):i()}))}else i(new Error("编码必须被填写"))};return{defaultProps:{children:"children",label:"name",id:"id"},filterText:void 0,menuList:[],mixinViewModuleOptions:{getDataListURL:"/base/productcategory/list",updateURL:"/base/productcategory/save",getDataListIsPage:!1,activatedIsNeed:!1},data:r,visible:!1,dataForm:{pname:void 0,parentId:void 0,id:void 0,code:void 0,name:void 0,pinyinCode:void 0,wbCode:void 0,remark:void 0},rules:{name:[{required:!0,message:"名称不可缺少"}],code:[{validator:t,trigger:"blur"}],pname:[{required:!0,message:"父类菜单不可缺少"}]},menuFormVisible:!1}},props:{parentDataList:{type:Array}},watch:{filterText:function(e){}},methods:{dataFormSubmitHandle:function(){var e=this,t=this;this.$refs["dataForm"].validate((function(a){if(!a)return!1;t.$axios({url:"/base/productcategory/save",method:"post",data:t.dataForm}).then((function(t){e.$message({message:e.$t("views.public.success"),type:"success",duration:500,onClose:function(){e.visible=!1,e.$emit("refreshDataList")}})})).catch((function(){}))}))},showPid:function(){var e=this;this.menuFormVisible=!0,this.$nextTick((function(){e.menuList=[{id:0,name:"顶级菜单",children:e.parentDataList}]}))},getSelectedMenu:function(){var e=this.$refs.tree.getCurrentNode();this.dataForm.pname=e.name,this.dataForm.parentId=e.id,this.menuFormVisible=!1},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},getMenuList:function(){var e=this;this.$axios.post("/base/productcategory/list",{name:this.filterText}).then((function(t){e.menuList=t}))},created:function(){this.getMenuList()}}},d=s,l=a("623f"),m=function(e){e.options.__source="src/views/base/pcategory/add-or-update.vue"},c=m,u=Object(l["a"])(d,i,o,!1,null,null,null);"function"===typeof c&&c(u);t["default"]=u.exports}}]);