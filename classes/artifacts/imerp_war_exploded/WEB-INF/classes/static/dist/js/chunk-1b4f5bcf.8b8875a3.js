(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b4f5bcf","chunk-528ce52c","chunk-2d0af10b"],{"0d78":function(e){e.exports=JSON.parse('{"form":{"account":{"name":"账户名称","bankName":"开户行","bankNum":"账号","balance":"账户余额","initBalance":"初始余额","status":"状态","remark":"备注"},"invoice":{"code":"编号","name":"票据名","customerName":"往来单位","customerId":"往来单位","ivDate":"票据日期","amount":"票据金额","summary":"摘要","ivType":"票据类型","cpName":"公司名称","taxNum":"税号","cpAddress":"公司地址","cpPhone":"公司电话","cpBank":"开户银行","cpBankNum":"银行账户","status":"状态","remark":"备注","updateBy":"更新人","updateDate":"更新日期"},"subject":{"id":"ID","parentId":"父级","companyId":"公司ID","code":"编码","name":"名称","subjectType":"类别","category":"科目类别","subjectLevel":"级别","direction":"余额方向"}}}')},"0eb5":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("d2-container",{staticClass:"mod-sys__user"},[a("el-collapse",{attrs:{slot:"header"},slot:"header",model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-collapse-item",{attrs:{name:"1"}},[a("template",{slot:"title"},[e._v("\n                查询条件"),a("i",{staticClass:"el-icon-d-arrow-right"})]),a("el-form",{ref:"dataForm",attrs:{inline:!0,size:"mini",model:e.dataForm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}}},[a("el-form-item",{attrs:{prop:"code"}},[a("el-input",{attrs:{placeholder:e.data.form.invoice.code,clearable:""},model:{value:e.dataForm.code,callback:function(t){e.$set(e.dataForm,"code",t)},expression:"dataForm.code"}})],1),a("el-form-item",{attrs:{prop:"customerName"}},[a("el-input",{attrs:{placeholder:e.data.form.invoice.customerName,clearable:""},model:{value:e.dataForm.customerName,callback:function(t){e.$set(e.dataForm,"customerName",t)},expression:"dataForm.customerName"}})],1),a("el-form-item",{attrs:{prop:"from"}},[a("el-date-picker",{attrs:{type:"date",valueFormat:"yyyy-MM-dd",placeholder:"票据日期起"},model:{value:e.dataForm.from,callback:function(t){e.$set(e.dataForm,"from",t)},expression:"dataForm.from"}})],1),a("el-form-item",{attrs:{prop:"to"}},[a("el-date-picker",{attrs:{type:"date",valueFormat:"yyyy-MM-dd",placeholder:"止"},model:{value:e.dataForm.to,callback:function(t){e.$set(e.dataForm,"to",t)},expression:"dataForm.to"}})],1),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.search}},[e._v(e._s(e.$t("views.public.query"))+"\n                    ")])],1),a("el-form-item",[a("el-button",{on:{click:e.handleFormReset}},[a("d2-icon",{attrs:{name:"refresh"}}),e._v("\n                        重置\n                    ")],1)],1)],1)],2)],1),a("vxe-grid",{ref:"pGrid",attrs:{border:"",resizable:"","highlight-current-row":"","remote-filter":"",size:"mini","row-id":"id",toolbar:e.toolbar,"proxy-config":e.tableProxy,columns:e.columns,"select-config":{reserve:!0},"edit-config":{trigger:"click",mode:"row",showStatus:!0},"tree-config":{children:"children"}},on:{"cell-dblclick":e.cellDblClick},scopedSlots:e._u([{key:"buttons",fn:function(){return[a("el-button",{ref:"btnAdd",attrs:{size:"mini",icon:"el-icon-circle-plus"},on:{click:e.addHandle}},[e._v("新增\n            ")]),a("el-button",{ref:"btnEdit",attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(t){return e.updateHandle(e.$refs.pGrid)}}},[e._v("修改\n            ")]),a("el-button",{ref:"btnDelete",attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.deleteHandleSetter(e.$refs.pGrid)}}},[e._v("删除\n            ")])]},proxy:!0}])}),a("el-pagination",{attrs:{slot:"footer","current-page":e.page,"page-sizes":[10,20,50,100],"page-size":e.limit,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":function(t){return e.pageSizeChangeHandle(t,"vxe")},"current-change":function(t){return e.pageCurrentChangeHandle(t,"vxe")}},slot:"footer"}),e.addOrUpdateVisible?a("add-or-update",{ref:"addOrUpdate",on:{refreshDataList:e.search}}):e._e()],1)},r=[],i=a("e1a58"),l=a("b607"),n=a("0d78"),d={name:"fin-invoice",mixins:[i["a"]],data:function(){return{activeName:"1",data:n,mixinViewModuleOptions:{getDataListURL:"/fin/invoice/list",getDataListIsPage:!0,deleteURL:"/fin/invoice/delete",deleteIsBatch:!0,deleteIsBatchKey:"id"},dataForm:{code:void 0,customerName:void 0,from:void 0,to:void 0},toolbar:{id:"full_edit_1",refresh:!0,resizable:{storage:!0},setting:{storage:!0}},columns:[{type:"index",width:30},{title:"编号",field:"code",sortable:!0,align:"center",width:"110px"},{title:"票据名称",field:"name",sortable:!0,align:"center",width:"110px"},{title:"往来单位",field:"customerName",sortable:!0,align:"center",width:"110px"},{title:"票据日期",field:"ivDate",sortable:!0,align:"center",width:"110px",formatter:["toDateString","yyyy-MM-dd"]},{title:"票据金额",field:"amount",sortable:!0,align:"center",width:"110px"},{title:"摘要",field:"summary",sortable:!0,align:"center",width:"110px"},{title:"票据类型",field:"ivName",sortable:!0,align:"center",width:"110px"},{title:"公司名称",field:"cpName",sortable:!0,align:"center",width:"110px"},{title:"税号",field:"taxNum",sortable:!0,align:"center",width:"110px"},{title:"单位地址",field:"apAddress",sortable:!0,align:"center",width:"110px"},{title:"电话号码",field:"cpPhone",sortable:!0,align:"center",width:"110px"},{title:"开户银行",field:"cpBank",sortable:!0,align:"center",width:"110px"},{title:"银行账户",field:"cpBankNum",sortable:!0,align:"center",width:"110px"},{title:"状态",field:"status",sortable:!0,align:"center",width:"110px"},{title:"备注",field:"remark",sortable:!0,align:"center",width:"110px"},{title:"更新人",field:"updateBy",sortable:!0,align:"center",width:"110px"},{title:"更新日期",field:"updateDate",sortable:!0,align:"center",width:"110px",formatter:["toDateString","yyyy-MM-dd"]}]}},components:{AddOrUpdate:l["default"]},methods:{handleFormReset:function(){this.$refs["dataForm"].resetFields()}}},c=d,s=a("623f"),m=function(e){e.options.__source="src/views/fin/invoice/index.vue"},p=m,u=Object(s["a"])(c,o,r,!1,null,null,null);"function"===typeof p&&p(u);t["default"]=u.exports},"5a1f":function(e,t,a){},"6def":function(e,t,a){"use strict";var o=a("5a1f"),r=a.n(o);r.a},b607:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{visible:e.visible,title:e.isNew?"新增":"修改","close-on-click-modal":!1,"close-on-press-escape":!1,width:"55%"},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"dataForm",staticClass:"tb-matthew",attrs:{model:e.dataForm,rules:e.rules,"label-width":"100px",inline:!0,labelSuffix:"：",size:"mini"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{prop:"id"}}),a("el-form-item",{attrs:{prop:"code",label:e.data.form.invoice.code}},[a("el-input",{attrs:{placeholder:e.data.form.invoice.code,disabled:e.dataForm.id},model:{value:e.dataForm.code,callback:function(t){e.$set(e.dataForm,"code",t)},expression:"dataForm.code"}})],1),a("el-form-item",{attrs:{prop:"name",label:e.data.form.invoice.name}},[a("el-input",{attrs:{placeholder:e.data.form.invoice.name},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),a("el-form-item",{attrs:{prop:"ivDate",label:e.data.form.invoice.ivDate}},[a("el-date-picker",{attrs:{type:"date",placeholder:e.data.form.invoice.ivDate},model:{value:e.data.ivDate,callback:function(t){e.$set(e.data,"ivDate",t)},expression:"data.ivDate"}})],1),a("el-form-item",{attrs:{prop:"amount",label:e.data.form.invoice.amount}},[a("el-input",{attrs:{placeholder:e.data.form.invoice.amount},model:{value:e.dataForm.amount,callback:function(t){e.$set(e.dataForm,"amount",e._n(t))},expression:"dataForm.amount"}})],1),a("el-form-item",{attrs:{prop:"ivType",label:e.data.form.invoice.ivType}},[a("im-selector",{attrs:{placeholder:"请选择票据分类",mapModel:e.dataForm,mapKeyVal:"ivName:ivType"},on:{"update:mapModel":function(t){e.dataForm=t},"update:map-model":function(t){e.dataForm=t}},model:{value:e.dataForm.ivType,callback:function(t){e.$set(e.dataForm,"ivType",t)},expression:"dataForm.ivType"}})],1),a("el-form-item",{attrs:{prop:"summary",label:e.data.form.invoice.summary}},[a("el-input",{attrs:{placeholder:e.data.form.invoice.summary},model:{value:e.dataForm.summary,callback:function(t){e.$set(e.dataForm,"summary",t)},expression:"dataForm.summary"}})],1),a("el-form-item",{attrs:{prop:"customerName",label:e.data.form.invoice.customerName}},[a("im-selector",{attrs:{placeholder:"请选择单位",mapModel:e.dataForm,mapKeyVal:"customerName:customerId",dataType:"biz.customersearch"},on:{"update:mapModel":function(t){e.dataForm=t},"update:map-model":function(t){e.dataForm=t},change:e.changeCust},model:{value:e.dataForm.customerName,callback:function(t){e.$set(e.dataForm,"customerName",t)},expression:"dataForm.customerName"}})],1),a("el-form-item",{attrs:{prop:"taxNum",label:e.data.form.invoice.taxNum}},[a("el-input",{attrs:{placeholder:e.data.form.invoice.taxNum},model:{value:e.dataForm.taxNum,callback:function(t){e.$set(e.dataForm,"taxNum",t)},expression:"dataForm.taxNum"}})],1),a("el-form-item",{attrs:{prop:"cpAddress",label:e.data.form.invoice.cpAddress}},[a("el-input",{attrs:{placeholder:e.data.form.invoice.cpAddress},model:{value:e.dataForm.cpAddress,callback:function(t){e.$set(e.dataForm,"cpAddress",t)},expression:"dataForm.cpAddress"}})],1),a("el-form-item",{attrs:{prop:"cpPhone",label:e.data.form.invoice.cpPhone}},[a("el-input",{attrs:{placeholder:e.data.form.invoice.cpPhone},model:{value:e.dataForm.cpPhone,callback:function(t){e.$set(e.dataForm,"cpPhone",t)},expression:"dataForm.cpPhone"}})],1),a("el-form-item",{attrs:{prop:"cpBank",label:e.data.form.invoice.cpBank}},[a("el-input",{attrs:{placeholder:e.data.form.invoice.cpBank},model:{value:e.dataForm.cpBank,callback:function(t){e.$set(e.dataForm,"cpBank",t)},expression:"dataForm.cpBank"}})],1),a("el-form-item",{attrs:{prop:"cpBankNum",label:e.data.form.invoice.cpBankNum}},[a("el-input",{attrs:{placeholder:e.data.form.invoice.cpBankNum},model:{value:e.dataForm.cpBankNum,callback:function(t){e.$set(e.dataForm,"cpBankNum",t)},expression:"dataForm.cpBankNum"}})],1),a("el-form-item",{attrs:{prop:"status",label:e.data.form.invoice.status}},[a("el-radio-group",{model:{value:e.dataForm.status,callback:function(t){e.$set(e.dataForm,"status",t)},expression:"dataForm.status"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),a("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),a("el-form-item",{attrs:{prop:"remark",label:e.data.form.invoice.remark}},[a("el-input",{attrs:{placeholder:e.data.form.invoice.remark},model:{value:e.dataForm.remark,callback:function(t){e.$set(e.dataForm,"remark",t)},expression:"dataForm.remark"}})],1)],1),a("template",{slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("views.public.cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:e.dataFormSubmit}},[e._v(e._s(e.$t("views.public.confirm")))])],1)],2)],1)},r=[],i=a("0d78"),l=a("e1a58"),n={mixins:[l["a"]],data:function(){var e=this,t=function(t,a,o){if(a){var r={};e.dataForm.id&&(r.id=e.dataForm.id),r.code=a,e.$axios({url:"/fin/invoice/checkCode",method:"post",data:r}).then((function(e){e>0?o(new Error("编码重复，请重新指定")):o()}))}else o(new Error("编码必须被填写"))},a=function(e,t,a){if(t){var o=/((\d{11})|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d)|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d))$)/;o.test(t)?a():a(new Error("输入的电话号码不符合格式"))}else a()};return{custVisible:!1,mixinViewModuleOptions:{getDataListURL:"/fin/invoice/list",updateURL:"/fin/invoice/save",getDataListIsPage:!1,activatedIsNeed:!1},data:i,visible:!1,dataForm:{code:void 0,name:void 0,customerName:void 0,customerId:void 0,ivDate:void 0,amount:void 0,summary:void 0,ivType:void 0,cpName:void 0,taxNum:void 0,cpAddress:void 0,cpPhone:void 0,cpBank:void 0,cpBankNum:void 0,status:1,remark:void 0},rules:{code:[{validator:t,trigger:"blur"}],name:[{required:!0,message:"名称不可缺少"}],cpPhone:[{validator:a,trigger:"blur"}],amount:[{type:"number",message:"票据金额必须为数字类型",trigger:"blur"}]}}},methods:{changeCust:function(e){e&&(this.dataForm.customerId=e.ID,this.dataForm.taxNum=e.TAX_NUM,this.dataForm.cpAddress=e.COMPANY_ADDRESS,this.dataForm.cpPhone=e.TEL,this.dataForm.cpBankNum=e.BANK_ACCOUNT,this.dataForm.cpBank=e.BANK)}},watch:{visible:function(e,t){if(e){var a=new Date;this.dataForm.ivDate=a}}}},d=n,c=(a("6def"),a("623f")),s=function(e){e.options.__source="src/views/fin/invoice/add-or-update.vue"},m=s,p=Object(c["a"])(d,o,r,!1,null,null,null);"function"===typeof m&&m(p);t["default"]=p.exports}}]);