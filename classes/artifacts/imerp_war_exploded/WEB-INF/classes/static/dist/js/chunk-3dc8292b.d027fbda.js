(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3dc8292b","chunk-187745b5","chunk-2d214028","chunk-2d0c7eb2"],{"3d50":function(e,t,a){"use strict";var r=a("8ed1"),i=a.n(r);i.a},"46c9":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("d2-container",{staticClass:"mod-sys__user"},[a("el-collapse",{attrs:{slot:"header"},slot:"header",model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-collapse-item",{attrs:{name:"1"}},[a("template",{slot:"title"},[e._v("\n                查询条件"),a("i",{staticClass:"el-icon-d-arrow-right"})]),a("el-form",{ref:"dataForm",attrs:{inline:!0,size:"mini",model:e.dataForm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}}},[a("el-form-item",{attrs:{prop:"type"}},[a("el-input",{attrs:{placeholder:e.formMap.form.data.type,clearable:""},model:{value:e.dataForm.type,callback:function(t){e.$set(e.dataForm,"type",t)},expression:"dataForm.type"}})],1),a("el-form-item",{attrs:{prop:"code"}},[a("el-input",{attrs:{placeholder:e.formMap.form.data.code,clearable:""},model:{value:e.dataForm.code,callback:function(t){e.$set(e.dataForm,"code",t)},expression:"dataForm.code"}})],1),a("el-form-item",{attrs:{prop:"name"}},[a("el-input",{attrs:{placeholder:e.formMap.form.data.name,clearable:""},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.search}},[e._v(e._s(e.$t("views.public.query"))+"\n                    ")])],1),a("el-form-item",[a("el-button",{on:{click:e.handleFormReset}},[a("d2-icon",{attrs:{name:"refresh"}}),e._v("\n                        重置\n                    ")],1)],1)],1)],2)],1),a("vxe-grid",{ref:"pGrid",attrs:{border:"",resizable:"","highlight-current-row":"","remote-filter":"",size:"mini","row-id":"id",toolbar:e.toolbar,"proxy-config":e.tableProxy,columns:e.columns,"select-config":{reserve:!0},"edit-config":{trigger:"click",mode:"row",showStatus:!0},"tree-config":{children:"children"}},on:{"cell-dblclick":e.cellDblClick},scopedSlots:e._u([{key:"buttons",fn:function(){return[a("el-button",{ref:"btnAdd",attrs:{size:"mini",icon:"el-icon-circle-plus"},on:{click:e.addHandle}},[e._v("新增\n            ")]),a("el-button",{ref:"btnEdit",attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(t){return e.updateHandleRefer(e.$refs.pGrid)}}},[e._v("修改\n            ")]),a("el-button",{ref:"btnDelete",attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.deleteHandleSetterRefer(e.$refs.pGrid)}}},[e._v("删除\n            ")])]},proxy:!0}])}),a("el-pagination",{attrs:{slot:"footer","current-page":e.page,"page-sizes":[10,20,50,100],"page-size":e.limit,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":function(t){return e.pageSizeChangeHandle(t,"vxe")},"current-change":function(t){return e.pageCurrentChangeHandle(t,"vxe")}},slot:"footer"}),e.addOrUpdateVisible?a("AddOrUpdate",{ref:"addOrUpdate",on:{refreshDataList:e.search}}):e._e()],1)},i=[],o=a("e1a58"),n=a("506d"),l=a("aeb0"),d=a("5353"),s={name:"tree",mixins:[o["a"]],data:function(){return{activeName:"1",data:d,formMap:l,mixinViewModuleOptions:{getDataListURL:"/base/tree/list",getDataListIsPage:!0,deleteURL:"/base/tree/delete",deleteIsBatch:!0},dataForm:{type:void 0,code:void 0,name:void 0},sysDic:["是","否"],toolbar:{id:"full_edit_1",refresh:!0,resizable:{storage:!0},setting:{storage:!0}},columns:[{type:"index",width:30},{title:"类型",field:"type",sortable:!0,align:"left",treeNode:!0},{title:"编码",field:"code",sortable:!0,align:"center"},{title:"名称",field:"name",sortable:!0,align:"center"},{title:"序号",field:"orderNum",sortable:!0,align:"center"},{title:"是否系统数据",field:"sys",align:"center",width:"100px",formatter:this.flagSelector},{title:"备注",field:"remark",sortable:!0,align:"center"},{title:"更新人",field:"updateBy",sortable:!0,align:"center"},{title:"修改日期",field:"updateDate",sortable:!0,align:"center",width:"100px",formatter:["toDateString","yyyy-MM-dd"]}]}},components:{AddOrUpdate:n["default"]},methods:{handleFormReset:function(){this.$refs["dataForm"].resetFields()},flagSelector:function(e){var t=e.cellValue;return t?"是":"否"},updateHandleRefer:function(){var e=this,t=this.pGrid.getCurrentRow();if(this.addOrUpdateVisible=!0,!t)return this.$message({message:"请选择要修改的记录",type:"warning"});if(0===t.sys)this.$nextTick((function(){e.$refs.addOrUpdate.init(t)}));else if(1===t.sys)return this.$message({message:"系统数据已被设置为不能被编辑",type:"warning"})},deleteHandleSetterRefer:function(){var e=this.pGrid.getCurrentRow();if(!e)return this.$message({message:"请选择要删除的记录",type:"warning"});if(0===e.sys)this.deleteHandleSetter(this.$refs.pGrid);else if(1===e.sys)return this.$message({message:"系统数据不能被删除",type:"warning"})}},created:function(){this.getDataList()}},c=s,m=a("623f"),u=function(e){e.options.__source="src/views/base/tree/index.vue"},p=u,f=Object(m["a"])(c,r,i,!1,null,null,null);"function"===typeof p&&p(f);t["default"]=f.exports},"506d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{visible:e.visible,title:e.isNew?e.$t("views.public.add"):e.$t("views.public.update"),"close-on-click-modal":!1,"close-on-press-escape":!1,width:"55%"},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"dataForm",staticClass:"tb-matthew",attrs:{model:e.dataForm,rules:e.rules,inline:!0,"label-width":"105px",labelSuffix:"：",size:"mini"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{prop:"id"}}),a("el-form-item",{attrs:{prop:"pname",label:e.data.data.input.pname},nativeOn:{click:function(t){return e.showPid(t)}}},[a("el-input",{attrs:{placeholder:e.data.data.input.pname},model:{value:e.dataForm.pname,callback:function(t){e.$set(e.dataForm,"pname",t)},expression:"dataForm.pname"}})],1),a("el-form-item",{attrs:{prop:"type",label:e.data.data.input.type}},[a("el-input",{attrs:{placeholder:e.data.data.input.type},model:{value:e.dataForm.type,callback:function(t){e.$set(e.dataForm,"type",t)},expression:"dataForm.type"}})],1),a("el-form-item",{attrs:{prop:"code",label:e.data.data.input.code}},[a("el-input",{attrs:{placeholder:e.data.data.input.code,disabled:e.dataForm.id},model:{value:e.dataForm.code,callback:function(t){e.$set(e.dataForm,"code",t)},expression:"dataForm.code"}})],1),a("el-form-item",{attrs:{prop:"name",label:e.data.data.input.name}},[a("el-input",{attrs:{placeholder:e.data.data.input.name},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),a("el-form-item",{attrs:{prop:"orderNum",label:e.data.data.input.orderNum}},[a("el-input",{attrs:{placeholder:e.data.data.input.orderNum},model:{value:e.dataForm.orderNum,callback:function(t){e.$set(e.dataForm,"orderNum",t)},expression:"dataForm.orderNum"}})],1),a("el-form-item",{attrs:{prop:"sys",label:e.data.data.input.sys}},[a("el-radio-group",{model:{value:e.dataForm.sys,callback:function(t){e.$set(e.dataForm,"sys",t)},expression:"dataForm.sys"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),a("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),a("el-form-item",{attrs:{prop:"remark",label:e.data.data.input.remark}},[a("el-input",{attrs:{placeholder:e.data.data.input.remark},model:{value:e.dataForm.remark,callback:function(t){e.$set(e.dataForm,"remark",t)},expression:"dataForm.remark"}})],1),a("el-form-item",{attrs:{prop:"attr1",label:e.data.data.input.attr1}},[a("el-input",{attrs:{placeholder:e.data.data.input.attr1},model:{value:e.dataForm.attr1,callback:function(t){e.$set(e.dataForm,"attr1",t)},expression:"dataForm.attr1"}})],1),a("el-form-item",{attrs:{prop:"attr2",label:e.data.data.input.attr2}},[a("el-input",{attrs:{placeholder:e.data.data.input.attr2},model:{value:e.dataForm.attr2,callback:function(t){e.$set(e.dataForm,"attr2",t)},expression:"dataForm.attr2"}})],1),a("el-form-item",{attrs:{prop:"attr3",label:e.data.data.input.attr3}},[a("el-input",{attrs:{placeholder:e.data.data.input.attr3},model:{value:e.dataForm.attr3,callback:function(t){e.$set(e.dataForm,"attr3",t)},expression:"dataForm.attr3"}})],1),a("el-form-item",{attrs:{prop:"attr4",label:e.data.data.input.attr4}},[a("el-input",{attrs:{placeholder:e.data.data.input.attr4},model:{value:e.dataForm.attr4,callback:function(t){e.$set(e.dataForm,"attr4",t)},expression:"dataForm.attr4"}})],1),a("el-form-item",{attrs:{prop:"attr5",label:e.data.data.input.attr5}},[a("el-input",{attrs:{placeholder:e.data.data.input.attr5},model:{value:e.dataForm.attr5,callback:function(t){e.$set(e.dataForm,"attr5",t)},expression:"dataForm.attr5"}})],1)],1),a("template",{slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("views.public.cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:e.dataFormSubmit}},[e._v(e._s(e.$t("views.public.confirm")))])],1)],2),a("el-dialog",{attrs:{title:"菜单选择",visible:e.menuFormVisible,width:"388px"},on:{"update:visible":function(t){e.menuFormVisible=t}}},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getParentData(t)}},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),a("el-tree",{ref:"tree",staticClass:"tree-container",staticStyle:{height:"300px"},attrs:{data:e.menuList,props:e.defaultProps,"node-key":"id","default-expand-all":"","filter-node-method":e.filterNode},on:{"node-click":e.getSelectedMenu}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"menuDia"},[a("el-button",{on:{click:function(t){e.menuFormVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.getSelectedMenu}},[e._v("确定")])],1)])],1)],1)},i=[],o=(a("cc57"),a("e1a58")),n=a("5353"),l={mixins:[o["a"]],data:function(){var e=this,t=function(t,a,r){if(a){var i={};e.dataForm.id&&(i.id=e.dataForm.id),i.code=a,e.$axios({url:"/base/tree/checkCode",method:"post",data:i}).then((function(e){e>0?r(new Error("编码重复，请重新指定")):r()}))}else r(new Error("编码必须被填写"))};return{mixinViewModuleOptions:{getDataListURL:"/base/tree/list",updateURL:"/base/tree/save",getDataListIsPage:!1,activatedIsNeed:!1},filterText:void 0,menuList:[],parentDataList:[],defaultProps:{children:"children",label:"name",id:"id"},data:n,visible:!1,dataForm:{id:void 0,parentId:void 0,type:void 0,code:void 0,name:void 0,orderNum:0,sys:0,companyId:void 0,remark:void 0,attr1:void 0,attr2:void 0,attr3:void 0,attr4:void 0,attr5:void 0,pname:void 0},rules:{code:[{validator:t,trigger:"blur"}],name:[{required:!0,message:"名称不可缺少",trigger:"blur"}],pname:[{required:!0,message:"父级菜单不可缺少"}],type:[{required:!0,message:"类型不可缺少",trigger:"blur"},{max:6,message:"此处最多6个字符",trigger:"blur"}]},menuFormVisible:!1}},watch:{filterText:function(e){},parentDataList:function(e){this.menuList=[{id:0,name:"顶级菜单",children:this.parentDataList}]}},methods:{showPid:function(){this.menuFormVisible=!0},getSelectedMenu:function(){var e=this.$refs.tree.getCurrentNode();this.dataForm.pname=e.name,this.dataForm.parentId=e.id,this.menuFormVisible=!1},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},getParentData:function(){var e=this,t={data:{}};t.data.name=this.filterText,this.$axios.post("/base/tree/nolist",{dataForm:t}).then((function(t){e.parentDataList=t}))}},created:function(){this.getParentData()}},d=l,s=(a("3d50"),a("623f")),c=function(e){e.options.__source="src/views/base/tree/add-or-update.vue"},m=c,u=Object(s["a"])(d,r,i,!1,null,null,null);"function"===typeof m&&m(u);t["default"]=u.exports},5353:function(e){e.exports=JSON.parse('{"data":{"input":{"pname":"父级菜单","parentId":"父级菜单","type":"类型","code":"编码","name":"名称","orderNum":"排序序号","sys":"系统数据与否","companyId":"公司ID","remark":"备注","attr1":"扩展弹性域1","attr2":"扩展弹性域2","attr3":"扩展弹性域3","attr4":"扩展弹性域4","attr5":"扩展弹性域5"}}}')},"8ed1":function(e,t,a){},aeb0:function(e){e.exports=JSON.parse('{"form":{"data":{"type":"类型","code":"编码","name":"名称"}}}')}}]);