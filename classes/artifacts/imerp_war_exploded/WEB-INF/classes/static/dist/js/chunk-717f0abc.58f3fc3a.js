(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-717f0abc"],{"35bf":function(e,t,r){"use strict";var a=r("5c44"),s=r.n(a);s.a},4191:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{staticClass:"abow-dialog",attrs:{visible:e.visible,title:e.dataForm.userId?e.$t("views.public.update"):e.$t("views.public.add"),"close-on-click-modal":!1,"close-on-press-escape":!1,width:"700px"},on:{"update:visible":function(t){e.visible=t}}},[r("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"120px",size:"mini",inline:!0,labelSuffix:"："}},[r("el-form-item",{attrs:{prop:"username",label:e.$t("views.public.user.username")}},[r("el-input",{attrs:{placeholder:e.$t("views.public.user.username"),disabled:!!e.dataForm.userId},model:{value:e.dataForm.username,callback:function(t){e.$set(e.dataForm,"username",t)},expression:"dataForm.username"}})],1),r("el-form-item",{attrs:{prop:"name",label:"用户名称"}},[r("el-input",{attrs:{placeholder:"用户名称"},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),r("el-form-item",{staticClass:"dept-list",attrs:{prop:"deptName",label:e.$t("views.public.user.deptName")}},[r("el-popover",{ref:"deptListPopover",attrs:{placement:"bottom-start",trigger:"click"},model:{value:e.deptListVisible,callback:function(t){e.deptListVisible=t},expression:"deptListVisible"}},[r("el-tree",{ref:"deptListTree",attrs:{data:e.deptList,props:{label:"name",children:"children"},"node-key":"deptId","highlight-current":!0,"expand-on-click-node":!1,accordion:""},on:{"current-change":e.deptListTreeCurrentChangeHandle}})],1),r("el-input",{directives:[{name:"popover",rawName:"v-popover:deptListPopover",arg:"deptListPopover"}],attrs:{readonly:!0,placeholder:e.$t("views.public.user.deptName")},model:{value:e.dataForm.deptName,callback:function(t){e.$set(e.dataForm,"deptName",t)},expression:"dataForm.deptName"}})],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{prop:"deptId"}},[r("el-input",{model:{value:e.dataForm.deptId,callback:function(t){e.$set(e.dataForm,"deptId",t)},expression:"dataForm.deptId"}})],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!this.dataForm.userId,expression:"!this.dataForm.userId?true:false"}],attrs:{prop:"password",label:e.$t("views.public.user.password")}},[r("el-input",{attrs:{type:"password","show-password":"",placeholder:e.$t("views.public.user.password")},model:{value:e.dataForm.password,callback:function(t){e.$set(e.dataForm,"password",t)},expression:"dataForm.password"}})],1),r("el-form-item",{attrs:{prop:"mobile",label:e.$t("views.public.user.mobile")}},[r("el-input",{attrs:{placeholder:e.$t("views.public.user.mobile")},model:{value:e.dataForm.mobile,callback:function(t){e.$set(e.dataForm,"mobile",t)},expression:"dataForm.mobile"}})],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!this.dataForm.userId,expression:"!this.dataForm.userId?true:false"}],attrs:{prop:"comPassword",label:e.$t("views.public.user.comfirmPassword")}},[r("el-input",{attrs:{type:"password","show-password":"",placeholder:e.$t("views.public.user.comfirmPassword")},model:{value:e.dataForm.comPassword,callback:function(t){e.$set(e.dataForm,"comPassword",t)},expression:"dataForm.comPassword"}})],1),r("el-form-item",{attrs:{prop:"email",label:e.$t("views.public.user.email")}},[r("el-input",{attrs:{placeholder:e.$t("views.public.user.email")},model:{value:e.dataForm.email,callback:function(t){e.$set(e.dataForm,"email",t)},expression:"dataForm.email"}})],1),r("el-form-item",{staticClass:"role-list",attrs:{prop:"roleIds",label:e.$t("views.public.user.roleIdList")}},[r("el-select",{attrs:{multiple:"",placeholder:e.$t("views.public.user.roleIdList")},model:{value:e.dataForm.roleIds,callback:function(t){e.$set(e.dataForm,"roleIds",t)},expression:"dataForm.roleIds"}},e._l(e.roleList,(function(t){return r("el-option",{key:t.roleId,attrs:{label:t.roleName,value:t.roleId}},[r("span",{staticStyle:{float:"left"}},[e._v(e._s(t.roleName))]),r("span",{directives:[{name:"show",rawName:"v-show",value:1==e.dataForm.currenId,expression:"dataForm.currenId ==1 ? true:false"}],staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.companyName))])])})),1)],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!!this.dataForm.userId,expression:"!this.dataForm.userId ? false:true"}],attrs:{prop:"status",label:e.$t("views.public.user.status"),size:"mini"}},[r("el-radio-group",{model:{value:e.dataForm.status,callback:function(t){e.$set(e.dataForm,"status",t)},expression:"dataForm.status"}},[r("el-radio",{attrs:{label:0}},[e._v(e._s(e.$t("views.public.user.status0")))]),r("el-radio",{attrs:{label:1}},[e._v(e._s(e.$t("views.public.user.status1")))])],1)],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==this.dataForm.currenId,expression:"this.dataForm.currenId ==1 ? true:false"}],attrs:{prop:"superUser",label:"是否设置超级用户",size:"mini"}},[r("el-radio-group",{model:{value:e.dataForm.superUser,callback:function(t){e.$set(e.dataForm,"superUser",t)},expression:"dataForm.superUser"}},[r("el-radio",{attrs:{label:0}},[e._v("否")]),r("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1)],1),r("template",{slot:"footer"},[r("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("views.public.cancel")))]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dataFormSubmitHandle()}}},[e._v(e._s(e.$t("views.public.confirm")))])],1)],2)},s=[],i=(r("5ab2"),r("6d57"),r("e10e"),r("289c")),o=(r("cc57"),r("391c")),l=r("10fd");r("2e3d");function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){Object(i["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d={data:function(){return{visible:!1,deptList:[],deptListVisible:!1,fullscreenLoading:!1,roleList:[],roleIdListDefault:[],dataForm:{userId:"",username:"",deptId:"0",deptName:"",password:"",comPassword:"",roleIds:"",gender:0,email:"",mobile:"",roleIdList:[],status:1,superUser:0,currenId:"",name:""}}},created:function(){this.getDeptList(),this.getRoleList()},computed:{dataRule:function(){var e=this,t=function(t,r,a){if(!e.dataForm.userId&&!/\S/.test(r))return a(new Error(e.$t("public.rules.required",{name:e.$t("views.public.user.password")})));a()},r=function(t,r,a){if(!e.dataForm.userId&&!/\S/.test(r))return a(new Error(e.$t("public.rules.required",{name:"用户名不能为空！"})));a()},a=function(t,r,a){return e.dataForm.userId||/\S/.test(r)?e.dataForm.password!==r?a(new Error(e.$t("views.public.user.validate.comfirmPassword"))):void a():a(new Error(e.$t("public.rules.required",{name:e.$t("views.public.user.comfirmPassword")})))},s=function(t,r,a){if(!Object(l["a"])(r))return a(new Error(e.$t("public.rules.format",{name:e.$t("views.public.user.email")})));a()},i=function(t,r,a){if(!Object(l["b"])(r))return a(new Error(e.$t("public.rules.format",{name:e.$t("views.public.user.mobile")})));e.$axios.post("/sys/user/checkmobile",{mobile:r,userId:e.dataForm.userId}).then((function(e){if(""!==e)return a(new Error(e));a()}))},o=function(t,r,a){if(e.dataForm.userId)return a();e.$axios.post("/sys/user/checkusername",{username:r}).then((function(e){if(""!==e)return a(new Error(e));a()}))},u=function(t,r,a){if(!e.dataForm.roleId&&!/\S/.test(r))return a(new Error("部门名称不能为空！"));a()};return{username:[{required:!0,message:"用户帐户不能为空!",trigger:"blur"},{validator:o,trigger:"blur"}],deptName:[{required:!0,message:this.$t("public.rules.required",{name:this.$t("views.public.user.deptName")}),trigger:"change"},{validator:u,trigger:"blur"}],password:[{validator:t,trigger:"blur"}],comPassword:[{validator:a,trigger:"blur"}],email:[{required:!0,message:this.$t("public.rules.required",{name:this.$t("views.public.user.email")}),trigger:"blur"},{validator:s,trigger:"blur"}],mobile:[{required:!0,message:this.$t("public.rules.required",{name:this.$t("views.public.user.mobile")}),trigger:"blur"},{validator:i,trigger:"blur"}],name:[{required:!0,message:"用户名称不能为空！",trigger:"blur"},{validator:r,trigger:"blur"}],roleIds:[{required:!0,message:"角色不能为空！",trigger:"change"}]}}},methods:{init:function(){var e=this;this.visible=!0,this.dataForm.userId=null,this.dataForm.roleIds=null,this.dataForm.password=null,this.dataForm.comPassword=null,this.$nextTick((function(){e.$refs["dataForm"].resetFields(),e.roleIdListDefault=[]}))},update:function(e){var t=this;this.visible=!0,this.$nextTick((function(){t.dataForm=Object.assign({},e),t.dataForm.comPassword=e.password,t.$refs["dataForm"].clearValidate()}))},getDeptList:function(){var e=this;return this.$axios.get("/sys/dept/select").then((function(t){e.deptList=t})).catch((function(){}))},getRoleList:function(){var e=this;return this.$axios.get("/sys/role/select").then((function(t){e.roleList=t})).catch((function(){}))},deptListTreeCurrentChangeHandle:function(e,t){this.dataForm.deptId=e.deptId,this.dataForm.deptName=e.name,this.deptListVisible=!1},dataFormSubmitHandle:Object(o["debounce"])((function(){var e=this;this.$refs["dataForm"].validate((function(t){if(!t)return!1;e.$axios["post"]("/sys/user/save",n({},e.dataForm)).then((function(t){e.$message({message:e.$t("views.public.success"),type:"success",duration:500,onClose:function(){e.visible=!1,e.$emit("refreshDataList")}})})).catch((function(){}))}))}),1e3,{leading:!0,trailing:!1})}},c=d,m=(r("35bf"),r("623f")),p=function(e){e.options.__source="src/views/sys/user-add-or-update.vue"},b=p,f=Object(m["a"])(c,a,s,!1,null,null,null);"function"===typeof b&&b(f);t["default"]=f.exports},"5c44":function(e,t,r){}}]);