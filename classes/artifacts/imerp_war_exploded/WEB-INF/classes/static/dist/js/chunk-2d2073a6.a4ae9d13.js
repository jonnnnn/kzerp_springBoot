(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2073a6"],{a045:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"abow_dialog",attrs:{title:e.isNew?"调拨单新增":"调拨单修改","close-on-click-modal":!1,visible:e.visible,width:"80%"},on:{"update:visible":function(t){e.visible=t}}},[r("div",[r("dynamic-form",{ref:"dataForm",attrs:{formprops:e.formprops,"col-span":"6,6,6,6","read-only":e.formReadOnly,alldescriptors:e.descriptors},model:{value:e.dataForm,callback:function(t){e.dataForm=t},expression:"dataForm"}})],1),r("vxe-grid",{ref:"sGrid",staticClass:"vxe-table-element",attrs:{border:"",resizable:"",size:"mini","highlight-current-row":"","remote-filter":"",toolbar:e.toolbar,"proxy-config":e.tableProxy,"edit-rules":e.validRules,columns:e.tableColumn,"select-config":{reserve:!0},"mouse-config":{selected:!0},"keyboard-config":{isArrow:!0,isDel:!0,isTab:!0,isEdit:!0},"edit-config":{trigger:"dblclick",mode:"cell"},"footer-cell-class-name":e.footerCellClassName,"footer-method":e.footerMethod,"show-footer":""},scopedSlots:e._u([{key:"buttons",fn:function(){return[r("el-button",{attrs:{size:"mini",icon:"el-icon-circle-plus"},on:{click:function(t){return e.$refs.sGrid.commitProxy("insert_actived")}}},[e._v("新增")]),r("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.removeSelecteds(e.$refs.sGrid)}}},[e._v("删除")])]},proxy:!0}])}),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"danger"},on:{click:function(t){e.visible=!1}}},[e._v("取消")]),r("el-button",{directives:[{name:"show",rawName:"v-show",value:e.enableSubmit,expression:"enableSubmit"}],attrs:{type:"primary",disabled:e.btnDisable},on:{click:e.dataFormSubmit}},[e._v("确定")])],1)],1)},i=[],a=r("e1a58"),s=r("be17"),l=r.n(s),n={type:"separate"},d={mixins:[a["a"]],data:function(){return{mixinViewModuleOptions:{getDataListURL:"/inv/transferbillline/list",updateURL:"/inv/transferbill/save",prodURL:"/base/product/search",getDataListIsPage:!1},visible:!1,btnDisable:!1,dataForm:{fromWarehouseId:"",toWarehouseId:"",pic:"",remark:""},descriptors:{orderNum:{type:"string",label:"调拨单号",disabled:"disabled",props:{clearable:!0}},fromWarehouseId:{type:"cust",label:"调出仓",ruletype:"integer",name:"im-selector",props:{mapKeyVal:"fromWarehouseCode:fromWarehouseId",dataType:"biz.warehouse",clearable:!0},required:!0},toWarehouseId:{type:"cust",label:"调入仓",ruletype:"integer",name:"im-selector",props:{mapKeyVal:"toWarehouseCode:toWarehouseId",dataType:"biz.warehouse",clearable:!0},required:!0},pic:{type:"cust",label:"负责人",name:"im-selector",props:{mapKeyVal:"picName:pic",dataType:"biz.employee",clearable:!0}},separate1:n,remark:{type:"string",label:"备注",colspan:4}},tableProxy:{autoLoad:!1},validRules:{productCode:[{required:!0,message:"物料必填"}],orderQty:[{required:!0,message:"调拨数量必填"},{type:"number",message:"请输入数字"}]},tableColumn:[{type:"selection",width:30,align:"center"},{type:"index",width:30,align:"center"},{title:"商品",field:"productCode",sortable:!0,align:"center",editRender:{name:"ElAutocomplete",props:{fetchSuggestions:this.prodSeach,triggerOnFocus:!1,popperClass:"prod-popper"},events:{select:this.handleProcSelect}},footerRender:function(e,t){return"汇总"}},{title:"单位",field:"uom",sortable:!0,align:"center"},{title:"调拨数量",field:"orderQty",sortable:!0,align:"center",editRender:{name:"input"},footerRender:function(e,t){return l.a.sum(t,e.property)}},{title:"备注",field:"remark",sortable:!0,align:"center",editRender:{name:"input"}}],toolbar:{id:"full_edit_1",resizable:{storage:!0},setting:{storage:!0}}}},methods:{prodSeach:function(e,t){var r=this;e&&this.$axios.post(this.mixinViewModuleOptions.prodURL,{name:e,warehouseId:this.dataForm.fromWarehouseId}).then((function(e){for(var o=0;o<e.length;o++)e[o].value=e[o].val;clearTimeout(r.timeout),r.timeout=setTimeout((function(){t(e)}),100*Math.random())}))},handleProcSelect:function(e,t){var r=e.row;t&&(Object.assign(r,t),r.uom=t.unit,r.productId=t.id,r.productCode=t.code)},initCB:function(){var e=this;this.$nextTick((function(){e.isNew||"NEW"==e.entityModel.status?e.$refs.dataForm.readOnly(!1):e.$refs.dataForm.readOnly(!0)}))}},mounted:function(){}},c=d,u=r("623f"),p=function(e){e.options.__source="src/views/inv/transferbill-add-or-update.vue"},m=p,f=Object(u["a"])(c,o,i,!1,null,null,null);"function"===typeof m&&m(f);t["default"]=f.exports}}]);